<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Student Dashboard</title>

<style>
body{
    margin:0;
    font-family:Segoe UI;
    background:#071a1e;
    color:#eafff7;
}

.container{
    max-width:1100px;
    margin:40px auto;
    padding:20px;
    border:3px solid #36f5c7;
    border-radius:20px;
    box-shadow:0 0 25px #36f5c7;
}

.top{
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.card{
    background:#0f2f34;
    padding:15px;
    border-radius:12px;
    border:1px solid #36f5c7;
    margin-top:20px;
}

button{
    padding:8px 15px;
    background:#36f5c7;
    border:none;
    border-radius:8px;
    cursor:pointer;
}
button:hover{
    transform:scale(1.05);
}

.progress-bar{
    width:100%;
    background:#1c4449;
    border-radius:10px;
    height:20px;
    margin-top:10px;
}

.progress-fill{
    height:100%;
    background:linear-gradient(90deg,#00ffcc,#00ffaa);
    border-radius:10px;
}
</style>
</head>
<script>
    const bar = document.querySelector('.progress-bar');
    const progress = bar.getAttribute('data-progress');

    let width = 0;
    const interval = setInterval(() => {
        if (width >= progress) {
            clearInterval(interval);
        } else {
            width++;
            bar.style.width = width + "%";
        }
    }, 10);
</script>
<script>
function spin() {
    fetch("/spin")
    .then(response => response.json())
    .then(data => {
        const result = document.getElementById("spin-result");

        if (data.reward > 0) {
            result.innerHTML = "üéâ You won " + data.reward + " coins!";
            setTimeout(() => {
                location.reload();
            }, 2000);
        } else {
            result.innerHTML = "‚ö† " + data.message;
        }
    });
}
</script>

<body>

<div class="container">

<div class="top">
    <h2>Welcome, {{ user['username'] }}</h2>
    <h3>Level {{ user['level'] }}</h3>
</div>

<div class="card">
    <h3>Coins: {{ user['coins'] }} ü™ô</h3>
</div>

<div class="card">
    <h3>Overall Progress</h3>

<p>{{ completed_games }} / {{ total_games }} Games Completed</p>

<div class="progress-bar-container">
    <div class="progress-bar" data-progress="{{ progress_percent }}">
    {{ progress_percent }}%
</div>

</div>

</div>

<div class="card">
    <h3>üé° Spin The Wheel</h3>
    <button onclick="spin()">Spin Now</button>
    <p id="spin-result"></p>
</div>


<div class="card">
    <h3>Achievements üèÜ</h3>

    {% for badge in achievements %}
        <p>{{ badge['badge_name'] }}</p>
    {% endfor %}
</div>

</div>

<script>
function spin(){
    fetch("/spin")
    .then(res=>res.json())
    .then(data=>{
        alert("You won " + data.reward + " coins!");
        location.reload();
    });
}
</script>

</body>
</html>
